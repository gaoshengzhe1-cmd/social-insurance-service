-- V7__update_2024_income_tax_brackets.sql
-- 更新2024年度（令和6年分）給与所得の源泉徴収税額表（月額表）のデータ
-- 88,000円から593,000円の区間を更新

-- 既存のテーブルを削除して再作成
DROP TABLE IF EXISTS income_tax_bracket;

-- テーブルを再作成
CREATE TABLE income_tax_bracket (
    id BIGSERIAL PRIMARY KEY,
    min_salary INTEGER NOT NULL,
    max_salary INTEGER NOT NULL,
    dependents0 DECIMAL(10,2),
    dependents1 DECIMAL(10,2),
    dependents2 DECIMAL(10,2),
    dependents3 DECIMAL(10,2),
    dependents4 DECIMAL(10,2),
    dependents5 DECIMAL(10,2),
    dependents6 DECIMAL(10,2),
    dependents7 DECIMAL(10,2),
    tax_amount_col_b DECIMAL(10,2)
);

-- インデックスを作成
CREATE INDEX idx_income_tax_bracket_salary ON income_tax_bracket (min_salary, max_salary);

-- 新しいデータを挿入
INSERT INTO income_tax_bracket 
(min_salary, max_salary, dependents_0, dependents_1, dependents_2, dependents_3, dependents_4, dependents_5, dependents_6, dependents_7, tax_amount_col_b)
VALUES
-- 88,000 - 157,000 円の範囲
(88000, 89000, 1220, 0, 0, 0, 0, 0, 0, 0, 1220),
(89000, 90000, 1240, 0, 0, 0, 0, 0, 0, 0, 1240),
(90000, 91000, 1260, 0, 0, 0, 0, 0, 0, 0, 1260),
(91000, 92000, 1290, 0, 0, 0, 0, 0, 0, 0, 1290),
(92000, 93000, 1310, 0, 0, 0, 0, 0, 0, 0, 1310),
(93000, 94000, 1330, 0, 0, 0, 0, 0, 0, 0, 1330),
(94000, 95000, 1350, 0, 0, 0, 0, 0, 0, 0, 1350),
(95000, 96000, 1370, 0, 0, 0, 0, 0, 0, 0, 1370),
(96000, 97000, 1390, 0, 0, 0, 0, 0, 0, 0, 1390),
(97000, 98000, 1410, 0, 0, 0, 0, 0, 0, 0, 1410),
(98000, 99000, 1440, 0, 0, 0, 0, 0, 0, 0, 1440),
(99000, 100000, 1460, 0, 0, 0, 0, 0, 0, 0, 1460),
(100000, 101000, 1480, 0, 0, 0, 0, 0, 0, 0, 1480),
(101000, 102000, 1500, 0, 0, 0, 0, 0, 0, 0, 1500),
(102000, 103000, 1520, 0, 0, 0, 0, 0, 0, 0, 1520),
(103000, 104000, 1540, 0, 0, 0, 0, 0, 0, 0, 1540),
(104000, 105000, 1560, 0, 0, 0, 0, 0, 0, 0, 1560),
(105000, 106000, 1580, 0, 0, 0, 0, 0, 0, 0, 1580),
(106000, 107000, 1600, 0, 0, 0, 0, 0, 0, 0, 1600),
(107000, 108000, 1620, 0, 0, 0, 0, 0, 0, 0, 1620),
(108000, 109000, 1640, 0, 0, 0, 0, 0, 0, 0, 1640),
(109000, 110000, 1660, 0, 0, 0, 0, 0, 0, 0, 1660),
(110000, 115000, 1680, 0, 0, 0, 0, 0, 0, 0, 1680),
(115000, 120000, 1760, 0, 0, 0, 0, 0, 0, 0, 1760),
(120000, 130000, 1840, 0, 0, 0, 0, 0, 0, 0, 1840),
(130000, 140000, 2000, 0, 0, 0, 0, 0, 0, 0, 2000),
(140000, 150000, 2160, 0, 0, 0, 0, 0, 0, 0, 2160),
(150000, 157000, 2320, 0, 0, 0, 0, 0, 0, 0, 2320),

-- 157,000 - 250,000 円の範囲
(157000, 159000, 3270, 1640, 0, 0, 0, 0, 0, 0, 3270),
(159000, 161000, 3340, 1720, 100, 0, 0, 0, 0, 0, 3340),
(161000, 163000, 2480, 1240, 0, 0, 0, 0, 0, 0, 2480),
(163000, 165000, 2560, 1320, 0, 0, 0, 0, 0, 0, 2560),
(165000, 167000, 2640, 1400, 0, 0, 0, 0, 0, 0, 2640),
(167000, 170000, 2720, 1480, 0, 0, 0, 0, 0, 0, 2720),
(170000, 173000, 2800, 1560, 0, 0, 0, 0, 0, 0, 2800),
(173000, 175000, 2880, 1640, 0, 0, 0, 0, 0, 0, 2880),
(175000, 177000, 2960, 1720, 0, 0, 0, 0, 0, 0, 2960),
(177000, 180000, 3040, 1800, 0, 0, 0, 0, 0, 0, 3040),
(180000, 183000, 3120, 1880, 0, 0, 0, 0, 0, 0, 3120),
(183000, 185000, 3200, 1960, 0, 0, 0, 0, 0, 0, 3200),
(185000, 187000, 3280, 2040, 0, 0, 0, 0, 0, 0, 3280),
(187000, 190000, 3360, 2120, 0, 0, 0, 0, 0, 0, 3360),
(190000, 193000, 3440, 2200, 0, 0, 0, 0, 0, 0, 3440),
(193000, 195000, 3520, 2280, 0, 0, 0, 0, 0, 0, 3520),
(195000, 197000, 3600, 2360, 0, 0, 0, 0, 0, 0, 3600),
(197000, 200000, 3680, 2440, 0, 0, 0, 0, 0, 0, 3680),
(200000, 203000, 3760, 2520, 0, 0, 0, 0, 0, 0, 3760),
(203000, 205000, 3840, 2600, 0, 0, 0, 0, 0, 0, 3840),
(205000, 207000, 3920, 2680, 0, 0, 0, 0, 0, 0, 3920),
(207000, 210000, 4000, 2760, 0, 0, 0, 0, 0, 0, 4000),
(210000, 213000, 4080, 2840, 0, 0, 0, 0, 0, 0, 4080),
(213000, 215000, 4160, 2920, 0, 0, 0, 0, 0, 0, 4160),
(215000, 217000, 4240, 3000, 0, 0, 0, 0, 0, 0, 4240),
(217000, 220000, 4320, 3080, 0, 0, 0, 0, 0, 0, 4320),
(220000, 223000, 4400, 3160, 0, 0, 0, 0, 0, 0, 4400),
(223000, 225000, 4480, 3240, 0, 0, 0, 0, 0, 0, 4480),
(225000, 227000, 4560, 3320, 0, 0, 0, 0, 0, 0, 4560),
(227000, 230000, 4640, 3400, 0, 0, 0, 0, 0, 0, 4640),
(230000, 233000, 4720, 3480, 0, 0, 0, 0, 0, 0, 4720),
(233000, 235000, 4800, 3560, 0, 0, 0, 0, 0, 0, 4800),
(235000, 237000, 4880, 3640, 0, 0, 0, 0, 0, 0, 4880),
(237000, 240000, 4960, 3720, 0, 0, 0, 0, 0, 0, 4960),
(240000, 243000, 5040, 3800, 0, 0, 0, 0, 0, 0, 5040),
(243000, 245000, 5120, 3880, 0, 0, 0, 0, 0, 0, 5120),
(245000, 247000, 5200, 3960, 0, 0, 0, 0, 0, 0, 5200),
(247000, 250000, 5280, 4040, 0, 0, 0, 0, 0, 0, 5280),

-- 250,000 - 350,000 円の範囲
(250000, 253000, 5360, 4120, 0, 0, 0, 0, 0, 0, 5360),
(253000, 255000, 5440, 4200, 0, 0, 0, 0, 0, 0, 5440),
(255000, 257000, 5520, 4280, 0, 0, 0, 0, 0, 0, 5520),
(257000, 260000, 5600, 4360, 0, 0, 0, 0, 0, 0, 5600),
(260000, 263000, 5680, 4440, 0, 0, 0, 0, 0, 0, 5680),
(263000, 265000, 5760, 4520, 0, 0, 0, 0, 0, 0, 5760),
(265000, 267000, 5840, 4600, 0, 0, 0, 0, 0, 0, 5840),
(267000, 270000, 5920, 4680, 0, 0, 0, 0, 0, 0, 5920),
(270000, 273000, 6000, 4760, 0, 0, 0, 0, 0, 0, 6000),
(273000, 275000, 6080, 4840, 0, 0, 0, 0, 0, 0, 6080),
(275000, 277000, 6160, 4920, 0, 0, 0, 0, 0, 0, 6160),
(277000, 280000, 6240, 5000, 0, 0, 0, 0, 0, 0, 6240),
(280000, 283000, 6320, 5080, 0, 0, 0, 0, 0, 0, 6320),
(283000, 285000, 6400, 5160, 0, 0, 0, 0, 0, 0, 6400),
(285000, 287000, 6480, 5240, 0, 0, 0, 0, 0, 0, 6480),
(287000, 290000, 6560, 5320, 0, 0, 0, 0, 0, 0, 6560),
(290000, 293000, 6640, 5400, 0, 0, 0, 0, 0, 0, 6640),
(293000, 295000, 6720, 5480, 0, 0, 0, 0, 0, 0, 6720),
(295000, 297000, 6800, 5560, 0, 0, 0, 0, 0, 0, 6800),
(297000, 300000, 6880, 5640, 0, 0, 0, 0, 0, 0, 6880),
(300000, 303000, 6960, 5720, 0, 0, 0, 0, 0, 0, 6960),
(303000, 305000, 7040, 5800, 0, 0, 0, 0, 0, 0, 7040),
(305000, 307000, 7120, 5880, 0, 0, 0, 0, 0, 0, 7120),
(307000, 310000, 7200, 5960, 0, 0, 0, 0, 0, 0, 7200),
(310000, 313000, 7280, 6040, 0, 0, 0, 0, 0, 0, 7280),
(313000, 315000, 7360, 6120, 0, 0, 0, 0, 0, 0, 7360),
(315000, 317000, 7440, 6200, 0, 0, 0, 0, 0, 0, 7440),
(317000, 320000, 7520, 6280, 0, 0, 0, 0, 0, 0, 7520),
(320000, 323000, 7600, 6360, 0, 0, 0, 0, 0, 0, 7600),
(323000, 325000, 7680, 6440, 0, 0, 0, 0, 0, 0, 7680),
(325000, 327000, 7760, 6520, 0, 0, 0, 0, 0, 0, 7760),
(327000, 330000, 7840, 6600, 0, 0, 0, 0, 0, 0, 7840),
(330000, 333000, 7920, 6680, 0, 0, 0, 0, 0, 0, 7920),
(333000, 335000, 8000, 6760, 0, 0, 0, 0, 0, 0, 8000),
(335000, 337000, 8080, 6840, 0, 0, 0, 0, 0, 0, 8080),
(337000, 340000, 8160, 6920, 0, 0, 0, 0, 0, 0, 8160),
(340000, 343000, 8240, 7000, 0, 0, 0, 0, 0, 0, 8240),
(343000, 345000, 8320, 7080, 0, 0, 0, 0, 0, 0, 8320),
(345000, 347000, 8400, 7160, 0, 0, 0, 0, 0, 0, 8400),
(347000, 350000, 8480, 7240, 0, 0, 0, 0, 0, 0, 8480),

-- 350,000 - 440,000 円の範囲
(350000, 353000, 8560, 7320, 0, 0, 0, 0, 0, 0, 8560),
(353000, 355000, 8640, 7400, 0, 0, 0, 0, 0, 0, 8640),
(355000, 357000, 8720, 7480, 0, 0, 0, 0, 0, 0, 8720),
(357000, 360000, 8800, 7560, 0, 0, 0, 0, 0, 0, 8800),
(360000, 363000, 8880, 7640, 0, 0, 0, 0, 0, 0, 8880),
(363000, 365000, 8960, 7720, 0, 0, 0, 0, 0, 0, 8960),
(365000, 367000, 9040, 7800, 0, 0, 0, 0, 0, 0, 9040),
(367000, 370000, 9120, 7880, 0, 0, 0, 0, 0, 0, 9120),
(370000, 373000, 9200, 7960, 0, 0, 0, 0, 0, 0, 9200),
(373000, 375000, 9280, 8040, 0, 0, 0, 0, 0, 0, 9280),
(375000, 377000, 9360, 8120, 0, 0, 0, 0, 0, 0, 9360),
(377000, 380000, 9440, 8200, 0, 0, 0, 0, 0, 0, 9440),
(380000, 383000, 9520, 8280, 0, 0, 0, 0, 0, 0, 9520),
(383000, 385000, 9600, 8360, 0, 0, 0, 0, 0, 0, 9600),
(385000, 387000, 9680, 8440, 0, 0, 0, 0, 0, 0, 9680),
(387000, 390000, 9760, 8520, 0, 0, 0, 0, 0, 0, 9760),
(390000, 393000, 9840, 8600, 0, 0, 0, 0, 0, 0, 9840),
(393000, 395000, 9920, 8680, 0, 0, 0, 0, 0, 0, 9920),
(395000, 397000, 10000, 8760, 0, 0, 0, 0, 0, 0, 10000),
(397000, 400000, 10080, 8840, 0, 0, 0, 0, 0, 0, 10080),
(400000, 403000, 10160, 8920, 0, 0, 0, 0, 0, 0, 10160),
(403000, 405000, 10240, 9000, 0, 0, 0, 0, 0, 0, 10240),
(405000, 407000, 10320, 9080, 0, 0, 0, 0, 0, 0, 10320),
(407000, 410000, 10400, 9160, 0, 0, 0, 0, 0, 0, 10400),
(410000, 413000, 10480, 9240, 0, 0, 0, 0, 0, 0, 10480),
(413000, 415000, 10560, 9320, 0, 0, 0, 0, 0, 0, 10560),
(415000, 417000, 10640, 9400, 0, 0, 0, 0, 0, 0, 10640),
(417000, 420000, 10720, 9480, 0, 0, 0, 0, 0, 0, 10720),
(420000, 423000, 10800, 9560, 0, 0, 0, 0, 0, 0, 10800),
(423000, 425000, 10880, 9640, 0, 0, 0, 0, 0, 0, 10880),
(425000, 427000, 10960, 9720, 0, 0, 0, 0, 0, 0, 10960),
(427000, 430000, 11040, 9800, 0, 0, 0, 0, 0, 0, 11040),
(430000, 433000, 11120, 9880, 0, 0, 0, 0, 0, 0, 11120),
(433000, 435000, 11200, 9960, 0, 0, 0, 0, 0, 0, 11200),
(435000, 437000, 11280, 10040, 0, 0, 0, 0, 0, 0, 11280),
(437000, 440000, 11360, 10120, 0, 0, 0, 0, 0, 0, 11360),

-- 440,000 - 500,000 円の範囲
(440000, 441000, 20090, 16700, 13470, 10240, 7650, 6030, 4420, 2800, 20090),
(441000, 442000, 20180, 16800, 13570, 10340, 7680, 6060, 4440, 2820, 20180),
(442000, 443000, 20270, 16900, 13670, 10440, 7710, 6090, 4460, 2840, 20270),
(443000, 444000, 20580, 16950, 13710, 10490, 7770, 6160, 4540, 2920, 20580),
(444000, 445000, 20670, 17050, 13810, 10590, 7800, 6190, 4560, 2940, 20670),
(445000, 446000, 20760, 17150, 13910, 10690, 7830, 6220, 4580, 2960, 20760),

-- 446,000 - 450,000 円の範囲
(446000, 447000, 21070, 17190, 13960, 10730, 7890, 6280, 4670, 3040, 21070),
(447000, 448000, 21160, 17290, 14060, 10830, 7920, 6310, 4690, 3060, 21160),
(448000, 449000, 21250, 17390, 14160, 10930, 7950, 6340, 4710, 3080, 21250),
(449000, 450000, 21560, 17440, 14200, 10980, 8010, 6400, 4790, 3170, 21560),

-- 450,000 - 460,000 円の範囲（一部抜粋）
(450000, 451000, 21650, 17540, 14300, 11080, 8040, 6430, 4810, 3190, 21650),
(451000, 452000, 21740, 17640, 14400, 11180, 8070, 6460, 4830, 3210, 21740),
(452000, 453000, 22050, 17680, 14450, 11220, 8140, 6520, 4910, 3290, 22050),
(453000, 454000, 22140, 17780, 14550, 11320, 8170, 6550, 4930, 3310, 22140),
(454000, 455000, 22230, 17880, 14650, 11420, 8200, 6580, 4950, 3330, 22230),

-- 455,000 - 465,000 円の範囲（一部抜粋）
(455000, 456000, 22540, 17930, 14690, 11470, 8260, 6650, 5030, 3410, 22540),
(456000, 457000, 22630, 18030, 14790, 11570, 8290, 6680, 5050, 3430, 22630),
(457000, 458000, 22720, 18130, 14890, 11670, 8320, 6710, 5070, 3450, 22720),

-- 460,000 - 470,000 円の範囲
(460000, 461000, 23030, 18170, 14940, 11710, 8470, 6770, 5160, 3530, 23030),
(461000, 462000, 23520, 18420, 15180, 11960, 8720, 6890, 5280, 3660, 23520),
(462000, 463000, 24010, 18660, 15430, 12200, 8960, 7010, 5400, 3780, 24010),
(463000, 464000, 24500, 18910, 15670, 12450, 9210, 7140, 5520, 3900, 24500),
(464000, 465000, 24990, 19150, 15920, 12690, 9450, 7260, 5650, 4020, 24990),

-- 470,000 - 480,000 円の範囲
(470000, 471000, 25480, 19400, 16160, 12940, 9700, 7380, 5770, 4150, 25480),
(471000, 472000, 25570, 19500, 16260, 13040, 9730, 7410, 5790, 4170, 25570),
(472000, 473000, 25660, 19600, 16360, 13140, 9760, 7440, 5810, 4190, 25660),
(473000, 474000, 25970, 19640, 16410, 13180, 9940, 7500, 5890, 4270, 25970),
(474000, 475000, 26060, 19740, 16510, 13280, 9970, 7530, 5910, 4290, 26060),

-- 480,000 - 490,000 円の範囲
(480000, 481000, 26950, 20490, 16900, 13670, 10430, 7750, 6140, 4510, 26950),
(481000, 482000, 27040, 20590, 17000, 13770, 10460, 7780, 6160, 4530, 27040),
(482000, 483000, 27130, 20690, 17100, 13870, 10490, 7810, 6180, 4550, 27130),

-- 490,000 - 500,000 円の範囲
(490000, 491000, 28420, 21960, 17630, 14410, 11170, 8120, 6500, 4880, 28420),
(491000, 492000, 28510, 22060, 17730, 14510, 11200, 8150, 6520, 4900, 28510),
(492000, 493000, 28600, 22160, 17830, 14610, 11230, 8180, 6540, 4920, 28600),

-- 500,000 - 510,000 円の範囲
(500000, 501000, 29890, 23430, 18370, 15140, 11900, 8670, 6870, 5250, 29890),
(501000, 502000, 29980, 23530, 18470, 15240, 11930, 8700, 6890, 5270, 29980),
(502000, 503000, 30070, 23630, 18570, 15340, 11960, 8730, 6910, 5290, 30070),

-- 510,000 - 520,000 円の範囲
(510000, 511000, 32260, 25800, 20740, 17510, 14270, 11040, 9240, 7620, 32260),
(511000, 512000, 32350, 25900, 20840, 17610, 14300, 11070, 9260, 7640, 32350),
(512000, 513000, 32440, 26000, 20940, 17710, 14330, 11100, 9280, 7660, 32440),

-- 520,000 - 530,000 円の範囲
(520000, 521000, 35420, 28960, 23900, 20670, 17430, 14200, 12380, 10560, 35420),
(521000, 522000, 35510, 29060, 24000, 20770, 17460, 14230, 12400, 10580, 35510),
(522000, 523000, 35600, 29160, 24100, 20870, 17490, 14260, 12420, 10600, 35600),

-- 530,000 - 540,000 円の範囲
(530000, 531000, 38580, 32120, 27060, 23830, 20590, 17360, 15520, 13700, 38580),
(531000, 532000, 38670, 32220, 27160, 23930, 20620, 17390, 15540, 13720, 38670),
(532000, 533000, 38760, 32320, 27260, 24030, 20650, 17420, 15560, 13740, 38760),

-- 540,000 - 550,000 円の範囲
(540000, 541000, 41740, 35280, 30220, 26990, 23750, 20520, 18660, 16840, 41740),
(541000, 542000, 41830, 35380, 30320, 27090, 23780, 20550, 18680, 16860, 41830),
(542000, 543000, 41920, 35480, 30420, 27190, 23810, 20580, 18700, 16880, 41920),

-- 550,000 - 560,000 円の範囲
(550000, 551000, 44900, 38440, 33380, 30350, 26910, 23680, 21800, 19980, 44900),
(551000, 552000, 44990, 38540, 33480, 30450, 26940, 23710, 21820, 20000, 44990),
(552000, 553000, 45080, 38640, 33580, 30550, 26970, 23740, 21840, 20020, 45080),

-- 560,000 - 570,000 円の範囲
(560000, 561000, 48060, 41600, 36540, 33710, 30470, 26840, 24940, 23120, 48060),
(561000, 562000, 48150, 41700, 36640, 33810, 30500, 26870, 24960, 23140, 48150),
(562000, 563000, 48240, 41800, 36740, 33910, 30530, 26900, 24980, 23160, 48240),

-- 570,000 - 580,000 円の範囲
(570000, 571000, 51220, 44760, 39700, 37070, 34030, 30000, 28080, 26260, 51220),
(571000, 572000, 51310, 44860, 39800, 37170, 34060, 30030, 28100, 26280, 51310),
(572000, 573000, 51400, 44960, 39900, 37270, 34090, 30060, 28120, 26300, 51400),

-- 580,000 - 590,000 円の範囲
(580000, 581000, 54380, 47920, 42860, 40430, 37590, 33160, 31220, 29400, 54380),
(581000, 582000, 54470, 48020, 42960, 40530, 37620, 33190, 31240, 29420, 54470),
(582000, 583000, 54560, 48120, 43060, 40630, 37650, 33220, 31260, 29440, 54560),

-- 590,000 円の範囲
(590000, 591000, 57540, 51080, 46020, 43790, 41150, 37320, 34360, 32540, 57540),
(591000, 592000, 57630, 51180, 46120, 43890, 41180, 37350, 34380, 32560, 57630),
(592000, 593000, 57720, 51280, 46220, 43990, 41210, 37380, 34400, 32580, 57720);

-- インデックスの再構築
REINDEX INDEX IF EXISTS idx_income_tax_bracket_salary;
